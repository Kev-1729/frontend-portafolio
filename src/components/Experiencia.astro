---
// src/components/Experience.astro
import { AnimatedCard } from "./AnimatedCard";
import SectionHeader from "./SectionHeader.astro";

const experiences = [
  {
    role: "Senior Frontend Developer",
    company: "Tech Solutions Inc.",
    period: "2021 - Presente",
    description:
      "Lideré el desarrollo de la interfaz de usuario para la plataforma principal, mejorando el rendimiento en un 40% y la experiencia de usuario.",
    tech: ["React", "TypeScript", "Next.js", "GraphQL", "Vercel"],
  },
  {
    role: "Software Engineer",
    company: "Innovate Co.",
    period: "2019 - 2021",
    description:
      "Desarrollé y mantuve aplicaciones web full-stack, colaborando en un equipo ágil para entregar nuevas funcionalidades de alto impacto.",
    tech: ["Node.js", "Express", "MongoDB", "Vue.js", "AWS"],
  },
  {
    role: "Junior Developer",
    company: "Digital Start LLC",
    period: "2018 - 2019",
    description:
      "Contribuí al desarrollo de sitios web para clientes, aprendiendo fundamentos de desarrollo web y control de versiones.",
    tech: ["HTML5", "CSS3", "JavaScript", "jQuery", "Git"],
  },
];
---

<section id="experience">
  <SectionHeader
    title="Experiencia Profesional"
    subtitle="Mi trayectoria construyendo productos digitales de alto impacto."
  />
  <div class="experience-timeline">
    {
      experiences.map((exp, index) => (
        <div class="timeline-item">
          <AnimatedCard client:visible delay={index * 0.2}>
            <div class="experience-card">
              <div class="card-header">
                <h3>{exp.role}</h3>
                <span class="period">{exp.period}</span>
              </div>
              <h4>{exp.company}</h4>
              <p>{exp.description}</p>
              <div class="tech-stack">
                {exp.tech.map((tech) => (
                  <span class="tech-tag">{tech}</span>
                ))}
              </div>
            </div>
          </AnimatedCard>
        </div>
      ))
    }
  </div>
</section>

<style>
  .experience-timeline {
    position: relative;
    max-width: 800px;
    margin: 2rem auto;
  }

  /* La línea vertical del timeline */
  .experience-timeline::after {
    content: "";
    position: absolute;
    width: 4px;
    background-color: rgba(255, 255, 255, 0.1);
    top: 0;
    bottom: 0;
    left: 50%;
    margin-left: -2px;
    border-radius: 2px;
  }

  .timeline-item {
    padding: 10px 40px;
    position: relative;
    width: 50%;
  }

  /* Alineación de las tarjetas a la izquierda y derecha */
  .timeline-item:nth-child(odd) {
    left: 0;
  }

  .timeline-item:nth-child(even) {
    left: 50%;
  }

  /* Círculos en la línea de tiempo */
  .timeline-item::after {
    content: "";
    position: absolute;
    width: 20px;
    height: 20px;
    right: -10px;
    background-color: var(--color-bg);
    border: 4px solid var(--color-primary);
    top: 25px;
    border-radius: 50%;
    z-index: 1;
    transition: background-color 0.3s ease;
  }

  .timeline-item:nth-child(even)::after {
    left: -10px;
  }

  .experience-card {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 1.5rem 2rem;
    backdrop-filter: blur(10px);
    position: relative;
    transition:
      border-color 0.3s ease,
      box-shadow 0.3s ease;
  }

  .timeline-item:hover .experience-card {
    border-color: var(--color-primary);
  }

  .timeline-item:hover::after {
    background-color: var(--color-primary);
  }

  .card-header {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    gap: 0.5rem;
  }

  .card-header h3 {
    color: var(--color-primary);
    font-size: 1.25rem;
  }

  .period {
    background-color: var(--color-primary);
    color: var(--color-bg);
    padding: 0.2rem 0.5rem;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 600;
    flex-shrink: 0;
  }

  h4 {
    color: #ccc;
    margin-bottom: 1rem;
    font-weight: 400;
  }

  .tech-stack {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1rem;
  }

  .tech-tag {
    background-color: rgba(0, 200, 255, 0.1);
    color: var(--color-primary);
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
  }

  /* Media Query para dispositivos móviles */
  @media screen and (max-width: 768px) {
    .experience-timeline::after {
      left: 30px;
    }

    .timeline-item {
      width: 100%;
      padding-left: 70px;
      padding-right: 25px;
    }

    .timeline-item:nth-child(odd),
    .timeline-item:nth-child(even) {
      left: 0;
    }

    .timeline-item::after {
      left: 20px;
    }
  }
</style>
